<% provide(:title, @user.name) %>
<!--Displays all movements and user info-->
<div class='row'>
    <aside class='col-md-12' id="border">
      <section class='user_info'>
        <h1>
         <%= gravatar_for @user %>
         <%= @user.name %>
          <p id="user_description">
            Is a web developer trying to create tools to extend human cooperation, empathy and education.
          </p>
        </h1>


        <div id="user_movements">
          <% if @user.movements.any? %>
              <h2>Started (<%= @user.movements.count %>) Movements</h2>
              <ul class="movements">
                <%= render @movements %>
              </ul>
              <%= will_paginate @movements %>
              <% end %>
        </div>
      </section>
    </aside>
</div>

<div class="container user_map_info">
  <div class="row">
    <div class="col-md-12 block-center">
      <%= form_tag(new_movement_path, method: "get") do %>
          <%= label_tag(:place, "Starting Location") %>
          <%= text_field_tag(:place) %>
          <%= submit_tag("Start a new Movement!") %>
      <% end %>
    </div>
  </div>
  <center>
  <div class="col-md-10 col-md-offset-1 block-center">
    <!--<div class="map_display_outer">-->
     <div id="geolocation" class="map_display_inner"></div>
    <!--</div>-->
  </div>
  </center>
</div>

<script src="//maps.google.com/maps/api/js?v=3.18&sensor=false&client=&key=&libraries=geometry&language=&hl=&region="></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->
<script type="text/javascript">
  var handler = Gmaps.build('Google');
  handler.buildMap({ internal: {id: 'geolocation'} }, function(){
    if(navigator.geolocation)
      navigator.geolocation.getCurrentPosition(displayOnMap);
  });

  function displayOnMap(position){
    var marker = handler.addMarker({
      lat: position.coords.latitude,
      lng: position.coords.longitude
    });
    handler.map.centerOn(marker);
  };


</script>
