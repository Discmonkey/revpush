<% provide(:title, @user.name) %>
<div class='row'>
    <aside class='col-md-12' id="border">

      <section class='user_info'>
        <h1>
         <%= gravatar_for @user %>
         <%= @user.name %>
          <p id="user_description">
            Is a web developer trying to create tools to extend human cooperation, empathy and education.
          </p>
        </h1>


        <div id="user_movements">
          <% if @user.movements.any? %>
              <h2>Started (<%= @user.movements.count %>) Movements</h2>
              <ul class="movements">
                <%= render @movements %>
              </ul>
              <%= will_paginate @movements %>
              <% end %>
        </div>
      </section>
    </aside>
</div>


<div class="row">
  <div class="col-md-12 user_map_info">
    <div class="map_display_outer">
      <div id="geolocation" class="map_display_inner"></div>
    </div>

  </div>
</div>

<script src="//maps.google.com/maps/api/js?v=3.18&sensor=false&client=&key=&libraries=geometry&language=&hl=&region="></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->
<script type="text/javascript">
  var handler = Gmaps.build('Google');
  handler.buildMap({ internal: {id: 'geolocation'} }, function(){
    if(navigator.geolocation)
      navigator.geolocation.getCurrentPosition(displayOnMap);
  });

  function displayOnMap(position){
    var marker = handler.addMarker({
      lat: position.coords.latitude,
      lng: position.coords.longitude
    });
    handler.map.centerOn(marker);
  };
</script>
